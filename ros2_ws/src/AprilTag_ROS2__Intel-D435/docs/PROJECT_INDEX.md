# ğŸ“‘ AprilTag ROS2 Intel-D435 - Project Index

A comprehensive guide to all documentation and resources in this repository.

---

## ğŸš€ Getting Started

### For First-Time Users
1. **Start here:** [`README.md`](README.md) - Complete overview with features, installation, and usage
2. **Quick start:** `apriltag_detector/QUICK_START.md` - Fast setup instructions for ROS 2
3. **Visual guide:** [`SETUP_GUIDE.md`](SETUP_GUIDE.md) - Step-by-step setup with Docker and local options

### For ROS 2 Integration
- [`ROS2_SETUP.md`](ROS2_SETUP.md) - ROS 2 workspace setup and configuration
- `apriltag_detector/package.xml` - ROS 2 package manifest

### For Docker Deployment
- [`DOCKER_SETUP.md`](DOCKER_SETUP.md) - Docker container setup and management
- `docker-compose.yml` - Development environment configuration
- `docker-compose.prod.yml` - Production environment configuration
- `Dockerfile` - Container image definition

---

## ğŸ“š Core Documentation Files

| File | Purpose | Audience |
|------|---------|----------|
| **README.md** | Complete project overview, features, usage | Everyone |
| **APRILTAG_DETECTOR_SUMMARY.md** | Technical summary of package completion | Developers |
| **SETUP_GUIDE.md** | Installation and configuration guide | New users |
| **ROS2_SETUP.md** | ROS 2 workspace integration | ROS 2 users |
| **DOCKER_SETUP.md** | Docker containerization guide | DevOps/Docker users |
| **PROJECT_INDEX.md** | This file - navigation guide | Everyone |

---

## ğŸ—ï¸ Project Structure Overview

### Root Level
```
AprilTag_ROS2_intel-D435/
â”œâ”€â”€ ğŸ“„ Documentation (*.md files)
â”œâ”€â”€ ğŸ³ Docker files (Dockerfile, docker-compose.yml)
â”œâ”€â”€ ğŸ“¦ Python package (apriltag_detector/)
â”œâ”€â”€ ğŸ”§ Build configuration (CMakeLists.txt, package.xml)
â”œâ”€â”€ ğŸ“œ Scripts (install.sh, setup_apriltag_detector.sh, etc.)
â””â”€â”€ ğŸ“ Data/Resources (camera_info/, data/, etc.)
```

### Main Package: `apriltag_detector/`
```
apriltag_detector/
â”œâ”€â”€ apriltag_detector/              # Python package source
â”‚   â”œâ”€â”€ apriltag_map.py             # Multi-tag mapping & TF publishing
â”‚   â”œâ”€â”€ camera_position_validator.py # Position validation tool
â”‚   â””â”€â”€ record_calibration_data.py   # Calibration data recording
â”œâ”€â”€ package.xml                      # ROS 2 package definition
â”œâ”€â”€ setup.py                         # Python setup configuration
â”œâ”€â”€ pyproject.toml                   # Python build configuration
â”œâ”€â”€ QUICK_START.md                   # Quick start guide
â””â”€â”€ README.md                        # Package-specific documentation
```

### Supporting Directories
- **`apriltag/`** - C/C++ AprilTag library (detection engine)
- **`apriltag_msgs/`** - Custom ROS 2 message definitions
- **`apriltag_ros/`** - Additional ROS 2 integration utilities
- **`image_pipeline/`** - Image processing pipelines
- **`camera_info/`** - Camera calibration files
- **`data/`** - Generated calibration and pose data
- **`scripts/`** - Standalone Python scripts
- **`build/`** - Build output (generated by colcon)
- **`install/`** - Installation output (generated by colcon)
- **`log/`** - Build logs (generated by colcon)

---

## ğŸ” What Each Main Module Does

### 1. **apriltag_map** - Multi-Tag Mapping
**Purpose:** Detect multiple AprilTags and create a unified coordinate system

**Key Features:**
- Real-time multi-tag detection
- Map frame construction with configurable origin
- Temporal filtering for stability
- TF2 broadcasting (ROS 2 integration)
- JSON export of map data

**How to Run:**
```bash
# Via ROS 2
ros2 run apriltag_detector apriltag_map

# Via standalone Python
python3 scripts/my_camera_apriltag.py
```

**Output:** `apriltag_map.json` with all tag positions and orientations

---

### 2. **camera_position_validator** - Position Verification
**Purpose:** Validate that detected camera/tag positions match expected values

**Key Features:**
- Real-time position comparison
- Visual pass/fail indicators (âœ“/âœ—)
- Configurable tolerance (default: 15mm)
- Color-coded validation overlay
- Detailed error metrics

**How to Run:**
```bash
# Via ROS 2
ros2 run apriltag_detector camera_validator

# Via standalone Python
python3 scripts/camera_position_validation.py
```

**Use Cases:**
- Verify physical setup accuracy
- Quality assurance for camera mounting
- Troubleshoot positioning errors

---

### 3. **record_calibration_data** - Hand-Eye Calibration Data
**Purpose:** Collect synchronized camera-to-tag and robot pose pairs

**Key Features:**
- Interactive pose capture
- Automatic camera pose detection
- Manual robot pose entry
- Multi-format output (.npy, .json)

**How to Run:**
```bash
# Via ROS 2
ros2 run apriltag_detector record_calibration

# Via standalone Python
python3 scripts/record_calibration_data.py
```

**Output:** 
- `data/camera_poses.npy` - Camera pose array
- `data/robot_poses.npy` - Robot pose array
- `data/calibration_data.json` - Structured format

---

## ğŸ“‹ Quick Reference: Common Tasks

### Installation
**Fast track:** See `README.md` â†’ Installation section
**Detailed:** See `SETUP_GUIDE.md` â†’ Installation Methods

### Running the Project
1. Basic mapping: `README.md` â†’ Quick Start â†’ Basic Multi-Tag Tracking
2. Validation: `README.md` â†’ Quick Start â†’ Camera Position Validation
3. Calibration: `README.md` â†’ Quick Start â†’ Hand-Eye Calibration

### Configuration
**All parameters:** `README.md` â†’ Configuration section
**Detection tuning:** `README.md` â†’ Configuration â†’ Detection Parameters

### Troubleshooting
**Common issues:** `README.md` â†’ Troubleshooting section

### ROS 2 Integration
**Workspace setup:** `ROS2_SETUP.md`
**Package structure:** `ROS2_SETUP.md` â†’ Project Structure

### Docker Deployment
**Quick start:** `DOCKER_SETUP.md` â†’ Quick Start
**Advanced:** `DOCKER_SETUP.md` â†’ Advanced Configuration

---

## ğŸ”„ Typical Workflows

### Workflow 1: Map Frame Construction
```
1. Place AprilTags in scene
2. Connect Intel D435 camera
3. Run: ros2 run apriltag_detector apriltag_map
4. View real-time visualization
5. Press 'Q' to save apriltag_map.json
```
**Documentation:** `README.md` â†’ Usage â†’ Basic Multi-Tag Tracking

### Workflow 2: Camera Position Validation
```
1. Physically measure tag positions
2. Update EXPECTED_TAG_POSITIONS in validator
3. Run: ros2 run apriltag_detector camera_validator
4. Review validation results
5. Adjust setup if needed
```
**Documentation:** `README.md` â†’ Usage â†’ Camera Position Validation

### Workflow 3: Hand-Eye Calibration
```
1. Mount camera on robot/workspace
2. Run: ros2 run apriltag_detector record_calibration
3. Move robot through different poses
4. Capture 10-20 pose pairs
5. Exit to save calibration data
6. Use data with calibration algorithm
```
**Documentation:** `README.md` â†’ Usage â†’ Hand-Eye Calibration Workflow

---

## ğŸ› ï¸ Setup Methods Comparison

| Method | Time | Complexity | Isolation | Reference |
|--------|------|-----------|-----------|-----------|
| **Docker** (Recommended) | 5-10 min | Low | Excellent | `DOCKER_SETUP.md` |
| **Manual Local** | 10-15 min | Medium | None | `SETUP_GUIDE.md` |
| **Pip Standalone** | 5 min | Low | No ROS 2 | `README.md` |

---

## ğŸ“ Getting Help

### For Different Issues

**Installation problems:**
- See `SETUP_GUIDE.md` â†’ Troubleshooting
- Or `DOCKER_SETUP.md` for Docker issues

**Camera/Detection issues:**
- See `README.md` â†’ Troubleshooting
- Check `camera_info/` for calibration files

**ROS 2 integration issues:**
- See `ROS2_SETUP.md`
- Check `apriltag_detector/package.xml`

**Validation failures:**
- See `README.md` â†’ Troubleshooting â†’ Camera Position Validation Issues
- Review expected positions in your setup

---

## ğŸ“Š Key Parameters & Configuration

All configuration is documented in:
- **Main guide:** `README.md` â†’ Configuration section
- **Package code:** Comments at top of each `.py` file in `apriltag_detector/`

Common parameters:
- `TAG_SIZE` - Physical AprilTag dimensions (default: 0.0625m)
- `FRAME_WIDTH`, `FRAME_HEIGHT` - Camera resolution (default: 640Ã—480)
- `TARGET_TAG_IDS` - Which tags to detect (default: [0,1,2])
- `MAP_ORIGIN_TAG_ID` - Map origin reference (default: 0)
- `POSITION_TOLERANCE` - Validation tolerance (default: 0.015m)

---

## ğŸ“¦ Output Files Generated

| File | Created By | Location | Format | Description |
|------|-----------|----------|--------|-------------|
| `apriltag_map.json` | `apriltag_map` | Root directory | JSON | Map data with all tag poses |
| `calibration_data.json` | `record_calibration` | `data/` | JSON | Structured calibration pairs |
| `camera_poses.npy` | `record_calibration` | `data/` | NumPy | Camera pose array |
| `robot_poses.npy` | `record_calibration` | `data/` | NumPy | Robot pose array |

---

## ğŸ§ª Testing & Validation

**Test script:** `apriltag_detector/test_package.py`

Verify installation:
```bash
python3 test_package.py
# Should show: âœ“ All imports successful, âœ“ Entry points available
```

---

## ğŸ“ˆ Performance & Specifications

**Tested Environment:**
- Camera: Intel RealSense D435
- SDK: RealSense 2.55+
- Python: 3.10+
- OpenCV: 4.10+
- ROS 2: Humble or later

**Performance:**
- Detection: Real-time (~30 FPS)
- Accuracy: Â±5-15mm depending on setup
- Latency: <50ms per frame

See `README.md` â†’ Tested Environment for full specifications.

---

## ğŸ“š Additional Resources

### Official Documentation
- [AprilTag Official](https://april.eecs.umich.edu/software/apriltag/)
- [RealSense SDK](https://github.com/IntelRealSense/librealsense)
- [ROS 2 Documentation](https://docs.ros.org/en/humble/)

### Related Projects
- [Original AprilTag ROS 2](https://github.com/Tinker-Twins/AprilTag-ROS-2)
- [dt-apriltags Python Wrapper](https://github.com/duckietown/lib-dt-apriltags)
- [AprilRobotics/apriltag](https://github.com/AprilRobotics/apriltag)

---

## ğŸ¯ Navigation by User Type

### ğŸ‘¨â€ğŸ’¼ Project Managers
- Start with `README.md` â†’ Features section
- Check `APRILTAG_DETECTOR_SUMMARY.md` for completion status

### ğŸ§‘â€ğŸ’» Developers
1. Read `README.md` for overview
2. Check `ROS2_SETUP.md` for workspace setup
3. Review code in `apriltag_detector/apriltag_detector/`
4. See `APRILTAG_DETECTOR_SUMMARY.md` for implementation details

### ğŸš€ DevOps/Infrastructure
- Start with `DOCKER_SETUP.md`
- Review `docker-compose.yml` and `Dockerfile`
- Check `SETUP_GUIDE.md` â†’ Docker section

### ğŸ¤– Roboticists
1. Read `README.md` â†’ Use Cases section
2. Follow workflow in `README.md` â†’ Usage section
3. Adjust parameters in `README.md` â†’ Configuration
4. Use calibration workflow for your robot setup

### ğŸ”§ System Integrators
- See `ROS2_SETUP.md` for integration
- Check `apriltag_detector/package.xml` for dependencies
- Review TF publishing setup in `apriltag_map.py`

---

## ğŸ“ File Modification History

**Last organized:** November 24, 2025

Key documentation files are maintained as follows:
- `README.md` - Main source of truth, updated regularly
- `SETUP_GUIDE.md` - Installation and configuration
- `ROS2_SETUP.md` - ROS 2 specific integration
- `DOCKER_SETUP.md` - Docker deployment
- `APRILTAG_DETECTOR_SUMMARY.md` - Development summary
- `PROJECT_INDEX.md` - This navigation guide (you are here)

---

## ğŸ“ Support & Contributions

**Author:** David Chen  
**Email:** gwchen24@gmail.com  
**GitHub:** [github.com/dddcccgw](https://github.com/dddcccgw)

**License:** BSD

For issues, questions, or contributions, please refer to the main repository.

---

*Navigation guide created to improve project organization and documentation clarity.*
